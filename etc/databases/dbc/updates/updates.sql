CREATE TABLE IF NOT EXISTS `applied_updates` (`id` varchar(9) NOT NULL DEFAULT '000000000', PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

delimiter $
begin not atomic
    -- 09/02/2021 1
    if (select count(*) from applied_updates where id='090220211') = 0 then
        alter table SkillLineAbility add column custom_PrecededBySpell int(11) not null default 0;
        
        UPDATE SkillLineAbility t1
        INNER JOIN SkillLineAbility t2 ON t2.SupercededBySpell = t1.Spell
        SET t1.custom_PrecededBySpell = t2.Spell;

        insert into applied_updates values ('090220211');
    end if;
	
	-- 17/06/2021 1
	if (select count(*) from applied_updates where id='170620211') = 0 then
		DROP TABLE IF EXISTS `exploration`;
		CREATE TABLE `exploration` (
		`ID` int NOT NULL DEFAULT '0',
		`explore_id` int NOT NULL AUTO_INCREMENT,
		`ExplorationLevel` int NOT NULL DEFAULT '0',
		PRIMARY KEY (`explore_id`,`ID`)
		)ENGINE=InnoDB AUTO_INCREMENT=489 DEFAULT CHARSET=utf8mb4;

		LOCK TABLES `exploration` WRITE;
		INSERT INTO `exploration`
		VALUES      (1,1,0),
					(2,2,0),
					(3,3,0),
					(4,4,0),
					(7,5,0),
					(8,6,0),
					(9,7,0),
					(10,8,0),
					(11,9,0),
					(12,10,0),
					(13,11,0),
					(14,12,0),
					(15,13,0),
					(16,14,0),
					(17,15,0),
					(18,16,7),
					(19,17,40),
					(20,18,14),
					(21,19,0),
					(22,20,0),
					(23,21,0),
					(24,22,0),
					(25,23,0),
					(26,24,0),
					(28,25,0),
					(30,26,0),
					(32,27,0),
					(33,28,0),
					(34,29,0),
					(35,30,42),
					(36,31,0),
					(37,32,36),
					(38,33,0),
					(40,34,0),
					(41,35,0),
					(42,36,25),
					(43,37,42),
					(44,38,0),
					(45,39,0),
					(46,40,0),
					(47,41,0),
					(49,42,0),
					(51,43,0),
					(53,44,0),
					(54,45,8),
					(55,46,0),
					(56,47,0),
					(57,48,5),
					(59,49,0),
					(60,50,8),
					(61,51,0),
					(62,52,8),
					(63,53,6),
					(64,54,6),
					(65,55,0),
					(66,56,0),
					(67,57,0),
					(68,58,16),
					(69,59,15),
					(70,60,24),
					(71,61,20),
					(72,62,63),
					(73,63,50),
					(74,64,43),
					(75,65,37),
					(76,66,37),
					(77,67,0),
					(80,68,10),
					(81,69,0),
					(82,70,0),
					(83,71,0),
					(84,72,0),
					(85,73,0),
					(86,74,8),
					(87,75,5),
					(88,76,6),
					(89,77,0),
					(91,78,8),
					(92,79,0),
					(93,80,28),
					(94,81,24),
					(95,82,20),
					(96,83,25),
					(97,84,19),
					(98,85,17),
					(99,86,30),
					(100,87,31),
					(101,88,32),
					(102,89,41),
					(103,90,40),
					(104,91,37),
					(105,92,42),
					(106,93,0),
					(107,94,14),
					(108,95,15),
					(109,96,15),
					(111,97,12),
					(113,98,15),
					(115,99,17),
					(116,100,39),
					(117,101,35),
					(118,102,22),
					(120,103,8),
					(121,104,28),
					(122,105,37),
					(123,106,34),
					(125,107,35),
					(126,108,0),
					(127,109,40),
					(128,110,36),
					(129,111,37),
					(130,112,0),
					(131,113,5),
					(132,114,0),
					(133,115,10),
					(134,116,10),
					(135,117,7),
					(136,118,5),
					(137,119,7),
					(138,120,7),
					(139,121,0),
					(141,122,0),
					(142,123,15),
					(143,124,18),
					(144,125,10),
					(145,126,18),
					(146,127,15),
					(147,128,15),
					(148,129,0),
					(149,130,12),
					(150,131,20),
					(151,132,0),
					(152,133,9),
					(153,134,10),
					(154,135,0),
					(155,136,0),
					(156,137,6),
					(157,138,8),
					(158,139,0),
					(159,140,5),
					(160,141,12),
					(161,142,10),
					(162,143,7),
					(163,144,0),
					(164,145,7),
					(165,146,5),
					(166,147,5),
					(167,148,8),
					(168,149,0),
					(169,150,0),
					(170,151,0),
					(172,152,18),
					(173,153,0),
					(186,154,5),
					(187,155,7),
					(188,156,0),
					(189,157,5),
					(190,158,56),
					(192,159,55),
					(193,160,55),
					(195,161,0),
					(196,162,0),
					(197,163,50),
					(198,164,55),
					(199,165,50),
					(200,166,54),
					(201,167,57),
					(202,168,46),
					(203,169,0),
					(204,170,15),
					(205,171,28),
					(206,172,0),
					(207,173,0),
					(208,174,0),
					(209,175,16),
					(210,176,0),
					(211,177,7),
					(212,178,8),
					(213,179,13),
					(214,180,0),
					(215,181,0),
					(219,182,15),
					(220,183,0),
					(221,184,0),
					(222,185,5),
					(223,186,0),
					(224,187,7),
					(225,188,9),
					(226,189,11),
					(227,190,11),
					(228,191,10),
					(229,192,12),
					(230,193,18),
					(231,194,20),
					(232,195,0),
					(233,196,15),
					(235,197,0),
					(236,198,16),
					(237,199,16),
					(238,200,0),
					(239,201,11),
					(240,202,12),
					(241,203,26),
					(242,204,28),
					(243,205,0),
					(244,206,0),
					(245,207,25),
					(246,208,48),
					(247,209,45),
					(249,210,50),
					(250,211,54),
					(251,212,0),
					(252,213,57),
					(253,214,56),
					(254,215,55),
					(255,216,59),
					(256,217,0),
					(257,218,0),
					(258,219,0),
					(259,220,5),
					(260,221,6),
					(261,222,8),
					(262,223,0),
					(263,224,0),
					(264,225,9),
					(265,226,11),
					(266,227,9),
					(267,228,0),
					(268,229,0),
					(269,230,18),
					(271,231,22),
					(272,232,20),
					(275,233,21),
					(276,234,0),
					(277,235,0),
					(278,236,32),
					(279,237,30),
					(280,238,34),
					(281,239,36),
					(282,240,35),
					(283,241,35),
					(284,242,27),
					(285,243,21),
					(286,244,22),
					(287,245,0),
					(288,246,27),
					(289,247,26),
					(290,248,30),
					(293,249,30),
					(294,250,30),
					(295,251,30),
					(296,252,0),
					(297,253,50),
					(298,254,0),
					(299,255,0),
					(300,256,41),
					(301,257,0),
					(302,258,0),
					(303,259,0),
					(305,260,0),
					(306,261,0),
					(307,262,48),
					(308,263,0),
					(309,264,24),
					(310,265,41),
					(311,266,44),
					(312,267,0),
					(313,268,31),
					(314,269,33),
					(315,270,31),
					(316,271,35),
					(317,272,33),
					(318,273,36),
					(320,274,30),
					(321,275,30),
					(322,276,0),
					(323,277,0),
					(324,278,36),
					(325,279,0),
					(326,280,0),
					(327,281,40),
					(328,282,0),
					(330,283,0),
					(331,284,0),
					(332,285,0),
					(333,286,38),
					(334,287,38),
					(335,288,38),
					(336,289,38),
					(337,290,36),
					(338,291,39),
					(339,292,45),
					(340,293,38),
					(341,294,36),
					(342,295,39),
					(343,296,0),
					(344,297,43),
					(345,298,39),
					(346,299,36),
					(347,300,43),
					(348,301,41),
					(349,302,0),
					(350,303,45),
					(351,304,48),
					(352,305,0),
					(353,306,44),
					(354,307,45),
					(355,308,46),
					(356,309,41),
					(357,310,0),
					(358,311,0),
					(359,312,25),
					(360,313,7),
					(361,314,0),
					(362,315,5),
					(363,316,0),
					(364,317,0),
					(365,318,0),
					(366,319,7),
					(367,320,6),
					(368,321,7),
					(369,322,9),
					(370,323,8),
					(371,324,0),
					(372,325,6),
					(373,326,0),
					(374,327,0),
					(375,328,0),
					(377,329,9),
					(378,330,10),
					(379,331,10),
					(380,332,15),
					(381,333,17),
					(382,334,15),
					(383,335,14),
					(384,336,11),
					(385,337,15),
					(386,338,12),
					(387,339,12),
					(388,340,15),
					(390,341,20),
					(391,342,12),
					(392,343,15),
					(393,344,0),
					(394,345,0),
					(395,346,0),
					(396,347,6),
					(397,348,7),
					(398,349,8),
					(399,350,6),
					(400,351,0),
					(401,352,0),
					(403,353,0),
					(404,354,8),
					(405,355,0),
					(406,356,0),
					(407,357,10),
					(408,358,0),
					(409,359,0),
					(410,360,8),
					(411,361,0),
					(412,362,0),
					(413,363,19),
					(414,364,20),
					(415,365,20),
					(416,366,23),
					(417,367,25),
					(418,368,23),
					(419,369,28),
					(420,370,25),
					(421,371,25),
					(422,372,26),
					(424,373,22),
					(425,374,0),
					(426,375,24),
					(427,376,0),
					(428,377,25),
					(429,378,0),
					(430,379,28),
					(431,380,25),
					(432,381,30),
					(433,382,0),
					(434,383,29),
					(435,384,0),
					(436,385,0),
					(437,386,22),
					(438,387,20),
					(439,388,35),
					(440,389,0),
					(441,390,20),
					(442,391,12),
					(443,392,19),
					(444,393,16),
					(445,394,14),
					(446,395,11),
					(447,396,11),
					(448,397,15),
					(449,398,16),
					(450,399,19),
					(452,400,0),
					(453,401,0),
					(454,402,0),
					(455,403,0),
					(456,404,14),
					(457,405,0),
					(458,406,0),
					(459,407,10),
					(460,408,20),
					(461,409,20),
					(463,410,0),
					(464,411,21),
					(465,412,25),
					(466,413,0),
					(467,414,25),
					(468,415,0),
					(469,416,0),
					(470,417,10),
					(471,418,0),
					(472,419,0),
					(473,420,0),
					(474,421,0),
					(475,422,0),
					(476,423,0),
					(477,424,43),
					(478,425,8),
					(479,426,0),
					(480,427,30),
					(481,428,24),
					(482,429,29),
					(483,430,30),
					(484,431,26),
					(485,432,25),
					(486,433,0),
					(487,434,0),
					(488,435,0),
					(489,436,0),
					(490,437,0),
					(491,438,0),
					(492,439,26),
					(493,440,0),
					(495,441,0),
					(496,442,36),
					(497,443,0),
					(498,444,0),
					(499,445,0),
					(500,446,0),
					(501,447,0),
					(502,448,36),
					(503,449,0),
					(504,450,0),
					(505,451,0),
					(506,452,0),
					(507,453,36),
					(508,454,0),
					(509,455,38),
					(510,456,0),
					(511,457,43),
					(512,458,0),
					(513,459,36),
					(514,460,0),
					(515,461,0),
					(516,462,0),
					(517,463,0),
					(518,464,36),
					(536,465,24),
					(537,466,55),
					(538,467,49),
					(539,468,53),
					(540,469,51),
					(541,470,0),
					(542,471,0),
					(543,472,53),
					(556,473,12),
					(576,474,25),
					(596,475,35),
					(597,476,0),
					(598,477,0),
					(599,478,30),
					(600,479,0),
					(602,480,39),
					(603,481,31),
					(604,482,36),
					(606,483,34),
					(607,484,37),
					(608,485,30),
					(609,486,32),
					(616,487,0),
					(618,488,0);
		UNLOCK TABLES;
		
		insert into applied_updates values ('170620211');
	end if;
end $
delimiter ;
